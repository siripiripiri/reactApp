import { useEffect, useState } from "react";
import { ActualList } from "./ActualList";
import { TodoForm } from "./TodoForm";

import "./style.css";

export default function App() {

  const handleInputChange = (event) => {
    setText(event.target.value);
  };

  const calculateInputHeight = (value) => {
    const lineHeight = 20; // Adjust as needed
    return value.split('\n').length * lineHeight;
  };

  const [todos, setTodos] = useState(() => {
    const localValue = localStorage.getItem("ITEMS")
    if (localValue == null) return []
    
    return JSON.parse(localValue)
  })

  useEffect(() => {
    localStorage.setItem("ITEMS", JSON.stringify(todos))
  },[todos])

  function addTodo(title){

    setTodos((currentTodos) => {
    return [
    ...currentTodos,
    { id:crypto.randomUUID(), title, completed:false
    },
    ]
})
}

  function toggleTodo(id, completed){
    setTodos(currentTodos =>{
      return currentTodos.map(todo=>
        {
          if(todo.id==id){
            return {...todo,completed}
          }
          return todo
        })
    })
  }
  function deleteTodo(id){
    setTodos(currentTodos=> {
      return currentTodos.filter(todo => todo.id !== id)
    })

  }

  return(
  <>
      <div class="headerStyle">
      <svg class="logo" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 1268 1267">
      <path d="M633.847 1076.46C650.638 1076.46 666.742 1083.13 678.615 1095C690.488 1106.87 697.159 1122.98 697.159 1139.77V1203.08C697.159 1219.87 690.488 1235.97 678.615 1247.85C666.742 1259.72 650.638 1266.39 633.847 1266.39C617.055 1266.39 600.952 1259.72 589.079 1247.85C577.205 1235.97 570.535 1219.87 570.535 1203.08V1139.77C570.535 1122.98 577.205 1106.87 589.079 1095C600.952 1083.13 617.055 1076.46 633.847 1076.46ZM1036.77 946.66L1081.53 991.426C1093.21 1003.34 1099.71 1019.38 1099.63 1036.06C1099.54 1052.74 1092.88 1068.71 1081.08 1080.51C1069.29 1092.3 1053.31 1098.97 1036.63 1099.05C1019.95 1099.13 1003.91 1092.63 992.001 1080.96L947.235 1036.19C935.559 1024.28 929.057 1008.24 929.142 991.558C929.226 974.878 935.89 958.905 947.685 947.11C959.479 935.315 975.453 928.651 992.133 928.567C1008.81 928.483 1024.85 934.984 1036.77 946.66ZM230.978 946.66C242.362 935.261 257.663 928.631 273.765 928.119C289.866 927.608 305.558 933.253 317.642 943.907C329.727 954.56 337.296 969.419 338.808 985.457C340.32 1001.5 335.661 1017.51 325.78 1030.23L320.51 1036.19L275.591 1080.96C264.152 1092.09 248.927 1098.5 232.967 1098.89C217.006 1099.28 201.488 1093.62 189.52 1083.05C177.552 1072.49 170.019 1057.79 168.428 1041.9C166.838 1026.02 171.307 1010.12 180.943 997.386L186.212 991.426L230.978 946.66ZM633.898 253.426C709.03 253.426 782.474 275.705 844.943 317.446C907.413 359.186 956.102 418.514 984.854 487.927C1013.61 557.339 1021.13 633.719 1006.47 707.407C991.813 781.095 955.634 848.781 902.508 901.907C849.382 955.033 781.695 991.213 708.007 1005.87C634.319 1020.53 557.94 1013 488.527 984.253C419.115 955.502 359.787 906.812 318.046 844.343C276.305 781.873 254.026 708.429 254.026 633.297C254.019 532.554 294.032 435.933 365.261 364.689C436.49 293.445 533.103 253.414 633.847 253.4L633.898 253.426ZM633.898 380.05C583.81 380.05 534.847 394.902 493.201 422.73C451.555 450.557 419.095 490.109 399.928 536.384C380.76 582.659 375.745 633.578 385.516 682.704C395.288 731.829 419.407 776.953 454.825 812.371C490.242 847.788 535.367 871.908 584.492 881.679C633.617 891.451 684.537 886.436 730.812 867.268C777.087 848.1 816.639 815.641 844.466 773.994C872.293 732.348 887.146 683.385 887.146 633.297C887.149 600.034 880.6 567.096 867.871 536.364C855.142 505.632 836.484 477.709 812.962 454.189C789.44 430.67 761.515 412.015 730.782 399.289C700.049 386.564 667.11 380.017 633.847 380.024L633.898 380.05ZM127.402 569.985C143.589 569.932 159.181 576.08 170.975 587.167C182.768 598.254 189.868 613.436 190.814 629.595C191.761 645.754 186.482 661.662 176.064 674.049C165.645 686.437 150.877 694.363 134.795 696.2L127.402 696.609H64.0392C47.8914 696.606 32.3553 690.432 20.6093 679.351C8.86325 668.27 1.79504 653.12 0.850642 637C-0.0937579 620.88 5.15704 605.008 15.5288 592.632C25.9007 580.255 40.6095 572.31 56.6464 570.42L64.0392 569.985H127.402ZM1203.71 569.985C1220.5 569.985 1236.6 576.656 1248.47 588.529C1260.35 600.402 1267.02 616.506 1267.02 633.297C1267.02 650.089 1260.35 666.192 1248.47 678.066C1236.6 689.939 1220.5 696.609 1203.71 696.609H1140.34C1123.55 696.609 1107.45 689.939 1095.57 678.066C1083.7 666.192 1077.03 650.089 1077.03 633.297C1077.03 616.506 1083.7 600.402 1095.57 588.529C1107.45 576.656 1123.55 569.985 1140.34 569.985H1203.71ZM186.059 185.586C196.97 174.664 211.495 168.104 226.904 167.138C242.312 166.173 257.543 170.868 269.733 180.342L275.591 185.586L320.357 230.352C331.755 241.736 338.386 257.037 338.897 273.139C339.409 289.24 333.763 304.931 323.11 317.016C312.457 329.1 297.598 336.67 281.559 338.181C265.52 339.693 249.509 335.034 236.785 325.154L230.825 319.884L186.059 275.118C174.193 263.242 167.528 247.14 167.528 230.352C167.528 213.564 174.193 197.462 186.059 185.586ZM1081.38 185.586C1087.26 191.463 1091.93 198.442 1095.11 206.123C1098.29 213.804 1099.93 222.037 1099.93 230.352C1099.93 238.667 1098.29 246.9 1095.11 254.581C1091.93 262.262 1087.26 269.241 1081.38 275.118L1036.61 319.91C1024.7 331.585 1008.66 338.087 991.98 338.003C975.299 337.918 959.326 331.255 947.531 319.46C935.736 307.665 929.072 291.692 928.988 275.011C928.904 258.331 935.406 242.291 947.081 230.378L991.847 185.611C997.729 179.711 1004.72 175.03 1012.41 171.835C1020.1 168.639 1028.35 166.994 1036.68 166.991C1045.02 166.989 1053.27 168.63 1060.96 171.821C1068.66 175.012 1075.65 179.689 1081.53 185.586H1081.38ZM633.719 0.152229C642.044 0.135411 650.29 1.76061 657.987 4.93481C665.683 8.109 672.677 12.7699 678.57 18.6506C684.463 24.5313 689.138 31.5165 692.327 39.2062C695.517 46.8959 697.159 55.1392 697.159 63.4642V126.776C697.159 143.568 690.488 159.671 678.615 171.544C666.742 183.418 650.638 190.088 633.847 190.088C617.055 190.088 600.952 183.418 589.079 171.544C577.205 159.671 570.535 143.568 570.535 126.776V63.4642C570.535 46.6728 577.205 30.5692 589.079 18.6959C600.952 6.82258 617.055 0.152229 633.847 0.152229H633.719Z" />
    </svg>
    <p class="logoTitle">Bright Lights Co. presents</p>
  </div>
  <div class="container">
  <svg class="todoLogo" width="48px" height="48px" viewBox="0 0 192 192" xmlns="http://www.w3.org/2000/svg" ><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"><path stroke="#FCF6E5" stroke-width="12" d="M80 105.485 48.284 73.769a4 4 0 0 0-5.657 0l-19.799 19.8a4 4 0 0 0 0 5.656L65.603 142"></path><rect width="36" height="132" x="147.279" y="37" stroke="#FCF6E5" stroke-linejoin="round" stroke-width="12" rx="4" transform="rotate(45 147.279 37)"></rect></g></svg>
  <h1 class="mainTitle">To-do List </h1>
</div>
  <TodoForm onSubmit={addTodo} handleInputChange={handleInputChange} calculateInputHeight={calculateInputHeight}/>
  <h1 className="headTitle">Current :</h1>
  <ActualList todos={todos} toggleTodo={toggleTodo} deleteTodo={deleteTodo}/>
  </>
  )
}